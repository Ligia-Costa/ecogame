<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ciência em Movimento — Protótipo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header>
      <img src="" alt="" style="width:56px;height:56px;border-radius:10px;background:linear-gradient(90deg,#ffd54a,#ffb74d);display:inline-block">
      <div>
        <h1>Ciência em Movimento — Protótipo</h1>
        <div class="small">Escolha um modo de jogo para começar a aventura.</div>
      </div>
    </header>

    <div id="mode-selection">
      <h2>Escolha o modo de jogo</h2>
      <div class="mode-buttons">
        <button id="real-life-btn" class="btn mode-btn">Modo Vida Real</button>
        <button id="virtual-life-btn" class="btn mode-btn">Modo Vida Virtual</button>
      </div>
    </div>

    <div id="real-life-mode" style="display: none;">
      <div class="grid">
        <div class="card">
          <div id="videoWrap">
            <video id="video" autoplay playsinline></video>
            <canvas id="overlay"></canvas>
          </div>

          <div class="hud">
            <div class="phase">Fase atual: <span id="phaseName">—</span></div>
            <div class="phase">Progresso: <span id="phaseIdx">0</span>/<span id="phaseTotal">0</span></div>
            <div style="flex:1"></div>
            <div class="score">Pontos: <span id="score">0</span></div>
          </div>

          <div style="margin-top:10px;display:flex;gap:8px">
            <button id="startBtn" class="btn">Iniciar jogo</button>
            <button id="calibrateBtn" class="btn" style="background:#6b9bd1">Calibrar (position)</button>
            <div style="flex:1"></div>
            <div class="muted">Use câmera, compare distância e movimentos amplos.</div>
          </div>
        </div>

        <div class="card panel">
          <div>
            <h3>Como jogar</h3>
            <ol class="small">
              <li>Permita acesso à câmera.</li>
              <li>Pressione <strong>Iniciar jogo</strong>.</li>
              <li>Realize a ação pedida na fase (pular, agachar, mover para o lado, levantar braços).</li>
              <li>Ao completar a fase, responda a pergunta que aparece para ganhar pontos.</li>
            </ol>
          </div>

          <div>
          <h3>Matérias do Jogo (12 temas)</h3>
          <div class="small">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
              <div>1. Energias Renováveis</div>
              <div>2. Agricultura Sustentável</div>
              <div>3. Biodiversidade</div>
              <div>4. Economia Circular</div>
              <div>5. Recursos Hídricos</div>
              <div>6. Tecnologias Verdes</div>
              <div>7. Poluição e Resíduos</div>
              <div>8. Mudanças Climáticas</div>
              <div>9. Sustentabilidade Urbana</div>
              <div>10. Bioenergia</div>
              <div>11. Conservação do Solo</div>
              <div>12. Consumo Consciente</div>
            </div>
          </div>
          </div>

          <div>
            <h3>Configuração</h3>
            <div class="small">Tempo por fase: <span id="phaseTime">8</span>s</div>
            <input id="phaseTimeInput" type="range" min="4" max="30" value="8" />
          </div>

          <footer>
            Protótipo feito para feira de ciências — use em ambiente bem iluminado. Ajuste sensibilidade de calibração se necessário.
          </footer>
        </div>
      </div>
    </div>

    <div id="virtual-life-mode" style="display: none; text-align: center;">
      <div class="card">
        <canvas id="gameCanvas" width="800" height="480" style="background-color: #1e293b; border-radius: 8px;"></canvas>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px; padding: 0 10px;">
          <div class="small">Use as setas do teclado (←, →, ↑) para mover o personagem.</div>
          <div class="phase">Nível: <span id="virtualLevelDisplay">1</span></div>
        </div>
      </div>
    </div>

    <!-- Modal de pergunta -->
    <div id="questionModal" class="questionModal" style="display:none">
      <div class="modalCard">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong id="qTitle">Pergunta</strong>
          <div class="small">Fase <span id="modalPhaseIdx">0</span></div>
        </div>
        <div id="qText" style="margin-top:10px"></div>
        <div class="choices" id="choices"></div>
      </div>
    </div>
  </div>

  <!-- Dependências (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.20.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/posenet@2.2.1/dist/posenet.min.js"></script>

  <script src="game.js"></script>
</body>
</html>
